{% if site.latex %}
<script src="/katex/katex.min.js" type="text/javascript"></script>
<script>
// https://github.com/gettalong/kramdown/issues/292
document.querySelectorAll("script[type='math/tex']").forEach(function(el) {
  el.outerHTML = katex.renderToString(el.textContent.replace(/%.*/g, ''), { displayMode: false });
});

document.querySelectorAll("script[type='math/tex; mode=display']").forEach(function(el) {
  el.outerHTML = katex.renderToString(el.textContent.replace(/%.*/g, ''), { displayMode: true });
});
</script>
{% endif %}
